Perubahan Sintaks:
create Class var $\rightarrow$ create object instance var of Class;
set var.attr = val $\rightarrow$ assign var.attr = val; (atau langsung var.attr = val;)
send Event to Target $\rightarrow$ generate Event to Target;
send Event to Target after Time $\rightarrow$ generate Event to Target delay Time;
relate a to b $\rightarrow$ relate a to b across R1; (Menambahkan identifier relasi)

Aksi Awal: Membuat Attendance (State Awal: Pending)
create object instance a of Attendance;
assign a.status = "Pending";
assign a.permission_uploaded = false;
// Atribut dari Schedule (s)
assign a.start_time = s.start_time;
assign a.end_time = s.end_time;
// Link Object (Relasi)
relate a to e across R1;
relate a to s across R2;
// Signaling: Timer
generate schedule_end_passed to a delay (s.end_time + 30);

// Sekarang dipisah menjadi 2 langkah:
create event instance evt_timeout of schedule_end_passed to a;
create timer t_timeout of (s.end_time + 30) generating evt_timeout;
// Catatan: Variabel 't_timeout' kini memegang kendali timer tersebut


Aksi Transisi: Pending Menjadi Present (Event: record_in_time)
assign self.status = "Present";
assign self.actual_time = rcvd_evt.time;
// Membatalkan timer (Simulasi bridge TIM::timer_cancel)
cancel schedule_end_passed from self;
generate Email to Notification;

create event instance e_mail_evt of Email to Notification;
generate e_mail_evt;


Aksi Transisi: Pending Menjadi Late (Event: record_late)
assign self.status = "Late";
assign self.actual_time = rcvd_evt.time;
cancel schedule_end_passed from self;
generate Email to Notification;

create event instance e_mail_evt of Email to Notification;
generate e_mail_evt;


Aksi Transisi: Pending Menjadi Absent (Event: schedule_end_passed)
assign self.status = "Absent";
generate Email to Notification;

create event instance e_mail_evt of Email to Notification;
generate e_mail_evt;


Aksi Transisi: Pending Menjadi Permission (Event: upload_permission)
assign self.status = "Permission";
assign self.permission_uploaded = true;
cancel schedule_end_passed from self;
generate Email to Notification;

create event instance e_mail_evt of Email to Notification;
generate e_mail_evt;


Aksi Transisi: Permission Menjadi Confirmed (Event: review_confirmed)
assign self.status = "Confirmed";
generate Email to Notification;

create event instance e_mail_evt of Email to Notification;
generate e_mail_evt;


Aksi Transisi: Permission Menjadi Rejected (Event: review_rejected)
assign self.status = "Rejected";
generate Email to Notification;

create event instance e_mail_evt of Email to Notification;
generate e_mail_evt;


Aksi Transisi: Permission Menjadi Canceled (Event: cancel_permission)
assign self.status = "Canceled";
assign self.permission_uploaded = false;
if (CurrentTime < self.end_time) then
  generate schedule_end_passed to self delay (self.end_time + 30);
end if;
generate Email to Notification;

create event instance e_mail_evt of Email to Notification;
generate e_mail_evt;


// 1. CREATE EVENT INSTANCE
// Bungkus Dulu niat dalam sebuah objek (variabel 'amplopSurat')
// <event instance> = amplopSurat
let amplopSurat = {
    eventName: 'OrderPlaced',       // <event label>
    payload: { customer: "Budi" },  // <event parameters>
    target: myOrder                 // <target>
};

// ... Mungkin ada logika lain di sini ...
// ... Atau menunggu waktu tertentu ...

// 2. GENERATE (Baru dikirim sekarang menggunakan variabel tadi)
// generate amplopSurat;
amplopSurat.target.emit(amplopSurat.eventName, amplopSurat.payload);